<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:popups="clr-namespace:MCOCSrv.Resources.Popups"
             x:Class="MCOCSrv.Resources.Content.ConsoleTemplate">

    <Grid>
        <Grid RowDefinitions="Auto, *" Padding="10">
            <Grid Grid.Row="0" RowDefinitions="Auto" ColumnDefinitions="2*, *">
            <Label
                Grid.Row="0"
                Text="{Binding Name, StringFormat='COMMAND CENTER - {0}'}"
                Style="{StaticResource TitleHeadLine}" FontAttributes="Bold"
                HorizontalTextAlignment="Center"/>
                <Grid Grid.Row="0" Grid.Column="1" ColumnDefinitions="Auto, Auto, Auto" ColumnSpacing="10">
                    <Label Grid.Column="0" Text="Status:" Style="{StaticResource SettingsData}"/>
                    <Ellipse x:Name="Status_Blimp" Grid.Column="1" WidthRequest="10" HeightRequest="10"/>
                    <Label x:Name="Status_Text" Grid.Column="2" Style="{StaticResource SettingsData}" Text="N/A"/>
                </Grid>
                
            </Grid>
            <Border Grid.Row="1" Stroke="{StaticResource PrimaryDark}" Margin="5">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10"/>
                </Border.StrokeShape>
                <Grid RowDefinitions="7*, 3*" ColumnDefinitions="7*,1*,2*" Padding="10" RowSpacing="5" ColumnSpacing="5">
                    <Border Grid.Row="0" Grid.RowSpan="1" Grid.Column="0" Grid.ColumnSpan="1" Stroke="{StaticResource Black}" BackgroundColor="{StaticResource Black}" StrokeShape="RoundRectangle 5">
                        <Grid RowDefinitions="*,Auto">
                            <ScrollView x:Name="ConsoleScrollView" Grid.Row="0" Padding="10">
                                <Label x:Name="ConsoleOutput" Text="{Binding CombinedConsoleOutput}"/>
                            </ScrollView>
                            <Border Grid.Row="1" Stroke="{StaticResource SecondaryDark}" BackgroundColor="{StaticResource Gray950}" StrokeShape="RoundRectangle 5">
                                <Entry Grid.Column="0" x:Name="ConsoleInput" IsSpellCheckEnabled="False"/>
                            </Border>
                        </Grid>
                    </Border>

                    <Border Grid.Row="1" Grid.RowSpan="1" Grid.Column="0" Grid.ColumnSpan="1" Stroke="{StaticResource Gray950}" BackgroundColor="{StaticResource Gray950}" StrokeShape="RoundRectangle 5">
                        <Grid RowDefinitions="Auto,*" ColumnDefinitions="*, Auto" Padding="10" RowSpacing="10">
                            <Label Grid.Row="0" Grid.Column="0" Text="Quick Actions" HorizontalOptions="Center" FontSize="17"/>
                            <Button x:Name="ManageQuickActionsBtn" Grid.Row="0" Grid.Column="1" Style="{StaticResource AddNewButton}" Text="Manage" ToolTipProperties.Text="Add/Remove Quick actions" Clicked="ManageQuickActionsBtn_Clicked"/>
                            <FlexLayout Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" BindableLayout.ItemsSource="{Binding Actions}" Direction="Row" Wrap="Wrap" JustifyContent="Start" AlignItems="Start">
                                <BindableLayout.ItemTemplate>
                                    <DataTemplate>
                                        <Button FlexLayout.Basis="20%"  Text="{Binding Name}" Margin="10, 0" Clicked="ExecuteQuickAction"/>
                                    </DataTemplate>
                                </BindableLayout.ItemTemplate>
                            </FlexLayout>
                        </Grid>
                    </Border>

                    <Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="1" Grid.ColumnSpan="1" Stroke="{StaticResource Gray950}" BackgroundColor="{StaticResource Gray950}" StrokeShape="RoundRectangle 5">
                        <FlexLayout Direction="Column" Wrap="NoWrap" AlignItems="Stretch">
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Start/Stop the server">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="Start_Stop_Button"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" x:Name="Start_Stop_Image"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Start/Stop Server" HorizontalTextAlignment="End" VerticalTextAlignment="Center"/>
                            </Grid>
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Restart the server">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="Restart_Button" Command="{Binding RestartServer}"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" Source="restart_icon_console.png"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Restart Server" HorizontalTextAlignment="End" VerticalTextAlignment="Center"/>
                            </Grid>
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Change Active World">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="World_Button"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" Source="world_icon_console.png"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Change World" HorizontalTextAlignment="End" VerticalTextAlignment="Center"/>
                            </Grid>
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Backup the server, WARNING! will stop the server from saving any progress for the durection of the backup procedure! May not work properly if server is running, always try to execute if server is stopped.">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="Backup_Button" Command="{Binding ForceBackup}"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" Source="backup_icon_console.png"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Force Backup" HorizontalTextAlignment="End" VerticalTextAlignment="Center"/>
                            </Grid>
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Browse Server Files">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="Folder_Button"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" Source="folder_icon_console.png"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Browse Files" HorizontalTextAlignment="End" VerticalTextAlignment="Center"/>
                            </Grid>
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Restore Backup">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="Restore_Backup_Button"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" Source="restart_icon_console.png"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Restore Backup"/>
                            </Grid>
                            <Grid ColumnDefinitions="50, *" RowDefinitions="Auto" ToolTipProperties.Text="Scheduler is a utility used to schedule events to happen at a given time or continuously over windows of time.">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer x:Name="Scheduler_Button"/>
                                </Grid.GestureRecognizers>
                                <Image Grid.Column="0" Grid.Row="0" Source="restart_icon_console.png"/>
                                <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource SettingsData}" Text="Scheduler"/>
                            </Grid>
                        </FlexLayout>
                    </Border>

                    <Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="2" Grid.ColumnSpan="1" Stroke="{StaticResource Gray950}" BackgroundColor="{StaticResource Gray950}">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="7"/>
                        </Border.StrokeShape>
                        <Grid RowDefinitions="Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto" ColumnDefinitions="*,*" Padding="10" RowSpacing="5" ColumnSpacing="5">
                            <Button Grid.Row="0" Grid.Column="0" Text="Modify Config" Clicked="OpenConfigRequest"/>
                            <Button Grid.Row="0" Grid.Column="1" Text="Ban List"/>
                            <Button Grid.Row="1" Grid.Column="0" Text="Force reload"/>
                            <Button Grid.Row="1" Grid.Column="1" Text="Op List"/>
                            <Button Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Text="Player List" x:Name="ShowPlayerListButton" Clicked="HandleShowPlayerList"/>
                            <Label Grid.Row="3" Grid.Column="0" Text="Difficulty" Style="{StaticResource SettingsData}"/>
                            <Picker x:Name="DifficultyPicker" Grid.Row="3" Grid.Column="1" SelectedIndexChanged="HandleChangeOption">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>Peaceful</x:String>
                                        <x:String>Easy</x:String>
                                        <x:String>Normal</x:String>
                                        <x:String>Hard</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>
                            <Label Grid.Row="4" Grid.Column="0" Text="Weather" Style="{StaticResource SettingsData}"/>
                            <Picker x:Name="WeatherPicker" Grid.Row="4" Grid.Column="1" SelectedIndexChanged="HandleChangeOption">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>Clear</x:String>
                                        <x:String>Rain</x:String>
                                        <x:String>Thunderstorm</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>
                            <Label Grid.Row="5" Grid.Column="0" Text="Whitelist" Style="{StaticResource SettingsData}" ToolTipProperties.Text="Initial state is based of of server.properties value, changing this will take effect only in current session"/>
                            <Switch x:Name="WhitelistSwitch" Grid.Row="5" Grid.Column="1" HorizontalOptions="Fill" Toggled="HandleSwitches"/>
                            <Label Grid.Row="6" Grid.Column="0" Text="Pvp" Style="{StaticResource SettingsData}"/>
                            <Switch x:Name="PvpSwitch" Grid.Row="6" Grid.Column="1" Toggled="HandleSwitches"/>
                            <Label Grid.Row="7" Grid.Column="0" Text="Hardcore" Style="{StaticResource SettingsData}"/>
                            <Switch x:Name="HardcoreSwitch" Grid.Row="7" Grid.Column="1" Toggled="HandleSwitches"/>
                            <Label Grid.Row="8" Grid.Column="0" Text="Keep Inventory" Style="{StaticResource SettingsData}"/>
                            <Switch x:Name="KeepInventorySwitch" Grid.Row="8" Grid.Column="1" Toggled="HandleSwitches"/>
                            <Label Grid.Row="9" Grid.Column="0" Text="Day cycle" Style="{StaticResource SettingsData}"/>
                            <Switch x:Name="DayCycleSwitch" Grid.Row="9" Grid.Column="1" Toggled="HandleSwitches"/>
                            <Label Grid.Row="10" Grid.Column="0" Text="Mob Spawning" Style="{StaticResource SettingsData}"/>
                            <Switch x:Name="MobSpawnSwitch" Grid.Row="10" Grid.Column="1" Toggled="HandleSwitches"/>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
        </Grid>
            <popups:ManageQuickActionsPopup x:Name="QuickActionsPopup"/>
            <popups:PlayerListPopup x:Name="PlayerListPopup"/>
    </Grid>
</ContentView>